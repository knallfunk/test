package com.wisedu.cloud.smp.dal.spc.dao.impl;

import com.wisedu.cloud.smp.common.exception.DaoException;
import com.wisedu.cloud.smp.dal.spc.dao.SchoolLicenseDao;
import com.wisedu.cloud.smp.dal.spc.mapper.SchoolLicenseMapper;
import com.wisedu.cloud.smp.dal.spc.model.SchoolLicense;
import com.wisedu.cloud.smp.dal.spc.model.SchoolLicenseExample;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.Date;
import java.util.List;

/**
 * Created by luqiang on 2016/6/22.
 */
@Service("schoolLicenseDao")
public class SchoolLicenseDaoImpl implements SchoolLicenseDao{

    @Autowired
    private SchoolLicenseMapper schoolLicenseMapper;

    public int insertSchoolLicense(SchoolLicense schoolLicense) throws DaoException{
        try {
            schoolLicense.setCreateTime(new Date());
            schoolLicense.setUpdateTime(new Date());
            schoolLicense.setStatus((short)0);
            return schoolLicenseMapper.insert(schoolLicense);
        }catch (Exception e){
            throw new DaoException("",e);
        }
    }

    public List<SchoolLicense> getLicenses(SchoolLicenseExample schoolLicenseExample) throws DaoException {
        try{
            return schoolLicenseMapper.selectByExample(schoolLicenseExample);
        }catch (Exception e){
            throw new DaoException("",e);
        }
    }

    public int isSchoolLicenseExist(SchoolLicenseExample schoolLicenseExample) throws DaoException{
        try {
            return schoolLicenseMapper.countByExample(schoolLicenseExample);
        }catch (Exception e){
            throw new DaoException("",e);
        }
    }

    public int updateSchoolLicense(SchoolLicense schoolLicense,SchoolLicenseExample schoolLicenseExample) throws DaoException{
        try {
            return schoolLicenseMapper.updateByExampleSelective(schoolLicense,schoolLicenseExample);
        }catch (Exception e){
            throw new DaoException("",e);
        }
    }
}
